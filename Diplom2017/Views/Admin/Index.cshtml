@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <script src="~/Content/myJS/Jquery.js"></script>
    <script src="~/Content/myJS/HighCharts.js"></script>
    <script src="~/Content/myJS/HighChartExport.js"></script>
    <script src="~/Content/myJS/Ajaxes.js"></script>
    <script src="~/Scripts/Chart.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" />

    <link href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.3/css/bootstrap-select.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Tangerine">

    <link href="~/Content/bootstrap.css" rel="stylesheet" />

    <link href="~/Content/css/mycss.css" rel="stylesheet" />

    <!-- <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script> -->
    <!--Diagram Script-->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Politechnic</title>
</head>
<body>

    <div class="container-fluent">
        <div class="row" style="width:100%;">
            <div class="col-md-2 col-sm-2 col-xs-2">
                <div class="sidenav" id="leftNav" style="left:0;">

                    <div class="politech">
                        <h4> P</h4><h5>olitechnic</h5>

                    </div>

                    <div class="drops">
                        <select class="form-control" data-live-search="true" id="lect">
                            <optgroup label="Lectures">
                                @Html.Partial("_DropDowns", Session["lections"])
                            </optgroup>
                        </select>
                        @*<ul class="dropdown-menu">
                                <li><a href="#">Dropdown link</a></li>
                                <li><a href="#">Dropdown link</a></li>
                            </ul>*@

                        <select class="form-control" data-live-search="true" id="theme">
                            <optgroup label="Themes" id="thme">
                                @Html.Partial("_DropDowns", Session["themes"])
                            </optgroup>
                        </select>
                    </div>

                    <span id="quest" class="sp"><p> &#8250;</p></span>
                    </br>
                    </br>
                    <h5>  <span class="glyphicon glyphicon-user" aria-hidden="true"></span> Active Students</h5>
                    <hr>
                    <div class="pad">
                        @Html.Partial("_OnlineStudents")
                    </div>
                </div>

            </div>

            <div class="col-md-10 col-sm-10 col-xs-10" style="padding:0;">
                <div class="row">
                    <nav class="navbar my_nav">
                        <!-- Navbar content -->
                        @*<img src="~/Content/Photos/Logo.png" class="logo" />*@

                        <div class="inner-addon left-addon" style="float:left">
                            <i class="glyphicon glyphicon-search"></i>
                            <input type="text" placeholder="Search" class="form-control" />
                        </div>

                        <span>
                            @Session["prof"]
                        </span>
                    </nav>
                </div>
                <div class="row chartContainer">
                    <div class="porc" id="por">

                        @Html.Partial("_question")

                    </div>

                    <!--///////////////////-->                    
                        @for (int i = 0; i < 20; i++)
                        {
                            string name = "charts" + i;
                            <div class="canvasParent">
                                <div id="@name"></div>
                            </div>
                        }
                    </div>

                    <!--///////////////////-->

                    <input type="button" style="float:right" class="btn btn-danger" id="chartButton" value="Show" />
                    <input type="button" style="float:right" class="btn btn-success" id="answerHtml" value="html" />
                </div>

                <h1>@Session["hello"]</h1>

                    @RenderBody()

                </div>
            </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {

            $("#answerHtml").click(function () {
               
                $.ajax({
                    url: '/Admin/answerHtml',
                    type: "POST",

                    contentType: "application/json",
                    dataType: "json",

                    success: function (data) {

                        $("#root").html("");

                        data.forEach(function (item) {
                            $("#root").append(item);
                        })
                    },
                    error: function () {
                        alert("ERROR");
                    }
                });

            });

            $("#chartButton").click(function () {

                $.ajax({
                    url: '/Admin/Chart',
                    type: "POST",

                    //data: JSON.stringify({ 'name': 'From user2' }),

                    contentType: "application/json",
                    dataType: "json",

                    success: function (data) {
                        showHigh(data);
                    },
                    error: function () {
                        alert("ERROR");
                    }
                });
            });

            count = 0;
            function showHigh(arr) {

                var divName = "charts" + count;
                count++;
                var chartId = document.getElementById(divName);

                var smartNames = JSON.parse(arr[0]);
                var badNames = JSON.parse(arr[1]);
                var alwaysSmartNames = JSON.parse(arr[2]);

                // Build the chart
                Highcharts.setOptions({
                    colors: ['green', 'red', 'orange']
                });

                Highcharts.chart(chartId, {
                    chart: {
                        plotShadow: false,
                        type: 'pie'
                    },
                    title: {
                        text: ''
                    },
                    tooltip: {
                        pointFormat: '{data.name}'
                    },
                    plotOptions: {
                        pie: {
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: false
                            },

                        }
                    },
                    series: [{
                        data: [{
                            name: smartNames,
                            y: smartNames.length
                            
                        },
                        {
                            name: badNames,
                            y: badNames.length
                        },
                        {
                            name: alwaysSmartNames,
                            y: alwaysSmartNames.length,
                            sliced: true,
                            selected: true
                        }]

                    }]
                })
            };

        });
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

    @*<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>*@
    <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.3/js/bootstrap-select.min.js"></script>

    <script>

        function Create(o) {

            $.ajax({
                url: '/Admin/CreateQuestion',
                type: "POST",


                data: JSON.stringify({ 'Id': o.id }),
                contentType: "application/json",
                // dataType: "html",

                success: function () {
                    clos();
                },
                error: function (e) {
                    alert(e.message);
                }
            });
        }   /// LOGGED STUDENTS DEMO


    </script>

    <script src="~/Scripts/bootstrap.js"></script>
    <script src="~/Content/myJS/script.js"></script>
</body>
</html>